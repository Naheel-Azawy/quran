<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
        <script src="dist/quran.js"></script>

        <center><div style="max-width:500px;padding:10px">
            <a href="https://github.com/Naheel-Azawy/quran">
                UNDER DEVELOPMENT - SRC
            </a>
            <br>
            <table>
                <tr><button onclick="set_css('b')">BLACK</button></tr>
                <tr><button onclick="set_css('y')">YELLOW</button></tr>
                <tr><button onclick="set_css('w')">WHITE</button></tr>
            </table>
            <br>
            <input id="q" type="text"/>
            <button onclick="update_con()">RUN</button>
            <br>
            <table>
                <tr><button onclick="prev()">PREV</button></tr>
                <tr><button onclick="next()">NEXT</button></tr>
            </table>
            <h3 id="con" dir=rtl></h3>
        </div></center>

        <script>

         var cur_page = 1;

         function set_css(css) {
             switch (css) {
                 case "b":
                     css = `body, button, select, input, a {
                                color: #ffffff;
                            }
                            body, button, select, input {
                                background-color: #000000;
                            }`;
                     break;
                 case "y":
                     css = `body, button, select, input, a {
                                color: #222222;
                            }
                            body, button, select, input {
                                background-color: #fafad4;
                            }`;
                     break;
                 case "w":
                     css = `body, button, select, input, a {
                                color: #000000;
                            }
                            body, button, select, input {
                                background-color: #ffffff;
                            }`;
                     break;
             }
             var style = document.createElement('style')
             style.innerText = css
             document.head.appendChild(style)
         }

         function update_con(arg) {
             if (arg == undefined) {
                 arg = document.getElementById("q").value;
             }
             if (!arg) arg = "";
             var page_check = arg.split("-p");
             if (page_check.length == 2) {
                 try {
                     page_check = Number(page_check[1].trim());
                     cur_page = page_check;
                 } catch (e) {}
             }
             document.getElementById("con").innerHTML =
                 quran(arg, true).split("\n").join("<br>");
         }

         function next() {
             ++cur_page;
             update_con("-p " + cur_page);
         }

         function prev() {
             --cur_page;
             update_con("-p " + cur_page);
         }

         document.getElementById("q").addEventListener("keyup", function(event) {
             if (event.keyCode === 13) {
                 event.preventDefault();
                 update_con();
             }
         });

         update_con(
             new URL(window.location.href).searchParams.get("q")
         );
        </script>
    </body>
</html>
